---
- name: Install semgrep
  community.general.pipx:
    name: semgrep
    state: latest

# asdf
- name: install asdf plugin
  ansible.builtin.shell: bash -c ". /home/{{ ansible_user }}/.asdf/asdf.sh && asdf plugin add semgrep {{ semgrep_asdf_plugin_url }}"
  ignore_errors: true

- name: set global semgrep version to system
  ansible.builtin.shell: bash -c ". /home/{{ ansible_user }}/.asdf/asdf.sh && asdf global semgrep system"
