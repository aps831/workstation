---

 - name: install redshift
   become: yes
   apt:
     name: "{{ packages }}"
   vars:
     packages:
     - redshift
     - redshift-gtk

 - name: set list view for new folders
   become_user: "{{ ansible_user }}"
   dconf: key="/org/nemo/preferences/default-folder-viewer" value="'list-view'"

 - name: set wallpaper file
   become_user: "{{ ansible_user }}"
   dconf: key="/org/cinnamon/desktop/background/picture-uri" value="'file:///home/{{ ansible_user }}/.wallpaper.png'"

 - name: centre wallpaper
   become_user: "{{ ansible_user }}"
   dconf: key="/org/cinnamon/desktop/background/picture-options" value="'centered'"

 - name: create bookmarks
   template:
     src: "bookmarks.{{ ansible_user }}.j2"
     dest: /home/{{ ansible_user }}/.config/gtk-3.0/bookmarks

 - name: add redshift autostart
   template:
     src: redshift-gtk.desktop.j2
     dest: /home/{{ ansible_user }}/.config/autostart/redshift-gtk.desktop

 - name: create directory for cinnamon config
   file:
     path: /home/{{ ansible_user }}/.cinnamon/configs
     state: directory
     mode: '0755'

 - name: copy cinnamon config
   copy:
    src: cinnamon/configs/
    dest: /home/{{ ansible_user }}/.cinnamon/configs/
    owner: "{{ ansible_user }}"
    group: "{{ ansible_user }}"
    mode: '0644'
